## 実家とのネットワーク構築(に失敗)した話

9999/99/99 XXXXXXXXX

---
### 自己紹介
あああああ

---
### 新潟と愛知でL2で結びたい
- サーバー(主にNASなど)を実家に置けば、電気代は親持ち
- nasneを愛知に置けば、愛知のテレビを新潟で見れる


---
### L2VPNの選定
- L2TPv3
- Softether
- EtherIP

---
### L2TPv3
対応ルーターが高いので、諦めました


---
### Softether
- 元々持っていたOrangePiを使って構築
- 当初はさくらVPS上にVPNサーバを設置
  - あまりに遅かった(5Mbpsほど)ため、実家側をサーバーに(30Mbps)

---
### ところが...
- NASへの接続は問題なかった
- nasneとのペアリングができない(後々原因が判明)
- １ヶ月ほどで実家へVPNの接続ができなくなる
  - やっぱり機器の信頼性が微妙

---
### EtherIP(今ここ)
- ix2005が1台500円くらいで安い！
- fqdnでの設定ができない
  - 別のvpnも用意して、繋がらなくなったときは手動で設定変更
- EtherIP over IPsec が遅い
  - 暗号化諦めて、用途を限定？(httpsとかだけにする)

---
### nasneがペアリングできない問題
そもそもなんでnasneがペアリングできないのか調べた
[写真]

### 調査結果
rttが一定以上あると、繋がらない
(5~20msを詰めることができなかった)

ツイッターでつぶやいたらとても嬉しい情報が
「DTCP-IPの規定でそもそも決まっている」
ってことでググると...

Wikiの写真

https://ja.wikipedia.org/wiki/Digital_Transmission_Content_Protection

### 調査結果
＼(^o^)／

### 結局...
新潟〜愛知でVPN構築した上でrtt7ms下回るのは厳しそう。
→EtherIP使おうがダメかもしれない。
ただ、IPoEなIPv6で構築すればもしかしたらワンチャンあるかもしれない

